<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Doc Checker Report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; line-height: 1.6; }
        .header { background-color: #f4f4f4; padding: 20px; border-radius: 5px; }
        .summary { background-color: #e8f4fd; padding: 15px; margin: 20px 0; border-radius: 5px; }
        .contradiction { background-color: #ffe6e6; padding: 15px; margin: 10px 0; border-left: 4px solid #ff4444; }
        .no-issues { background-color: #e6ffe6; padding: 15px; margin: 20px 0; border-left: 4px solid #44ff44; }
        .score { font-weight: bold; color: #333; }
        .recommendations { background-color: #fff3cd; padding: 15px; margin: 20px 0; border-radius: 5px; }
        h1, h2, h3 { color: #333; }
        .timestamp { color: #666; font-size: 0.9em; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Smart Doc Checker Report</h1>
        <p class="timestamp">Generated on: {{ report_date }}</p>
    </div>

    <div class="summary">
        <h2>Executive Summary</h2>
        <p><strong>Documents Analyzed:</strong> {{ summary.total_documents }}</p>
        <p><strong>Total Statements:</strong> {{ summary.total_statements }}</p>
        <p><strong>Contradictions Found:</strong> {{ summary.total_contradictions }}</p>
        <p><strong>Overall Consistency Score:</strong> <span class="score">{{ "%.2f"|format(summary.overall_consistency_score * 100) }}%</span></p>
    </div>

    {% if summary.total_contradictions > 0 %}
    <h2>Contradictions Found</h2>
    
    {% for doc_name, doc_results in individual_documents.items() %}
    {% if doc_results.contradictions %}
    <h3>{{ doc_name }}</h3>
    {% for contradiction in doc_results.contradictions %}
    <div class="contradiction">
        <h4>Contradiction {{ loop.index }} (Score: {{ "%.3f"|format(contradiction.contradiction_score) }})</h4>
        <p><strong>Statement 1:</strong> {{ contradiction.statement1.text }}</p>
        <p><strong>Statement 2:</strong> {{ contradiction.statement2.text }}</p>
        <p><strong>Confidence:</strong> {{ "%.3f"|format(contradiction.confidence) }}</p>
    </div>
    {% endfor %}
    {% endif %}
    {% endfor %}

    {% if cross_document_contradictions %}
    <h3>Cross-Document Contradictions</h3>
    {% for contradiction in cross_document_contradictions %}
    <div class="contradiction">
        <h4>Cross-Document Contradiction {{ loop.index }}</h4>
        <p><strong>Documents:</strong> {{ contradiction.document1 }} ↔ {{ contradiction.document2 }}</p>
        <p><strong>{{ contradiction.document1 }}:</strong> {{ contradiction.statement1.text }}</p>
        <p><strong>{{ contradiction.document2 }}:</strong> {{ contradiction.statement2.text }}</p>
        <p><strong>Contradiction Score:</strong> {{ "%.3f"|format(contradiction.contradiction_score) }}</p>
    </div>
    {% endfor %}
    {% endif %}

    <div class="recommendations">
        <h2>Recommendations</h2>
        <ul>
            <li>Review all {{ summary.total_contradictions }} contradictions identified above</li>
            <li>Verify factual accuracy of conflicting statements</li>
            <li>Consider updating documents to resolve inconsistencies</li>
            <li>Implement review processes to prevent future contradictions</li>
        </ul>
    </div>

    {% else %}
    <div class="no-issues">
        <h2>✅ No Contradictions Detected!</h2>
        <p>All documents appear to be consistent. Great job!</p>
    </div>
    {% endif %}

    <hr>
    <p><em>Report generated by Smart Doc Checker Agent</em></p>
</body>
</html>